function isMobile(d){var a=$.trim(d);var f=/^(((13[0-9]{1})|159|(15[0-9]{1})|(18[0-9]{1})|(14[0-9]{1})|(17[0-9]{1}))+\d{8})$/;if(parseInt(a.length)<=0){return false}var c,b,e;e="0123456789";if(a.substring(0,1)!="1"&&a.substring(0,1)!="0"){return false}for(c=0;c<11;c++){b=e.indexOf(a.substring(c,c+1));if(b==-1){return false}}if(parseInt(a.length)!=11){return false}if(!f.test(a)){return false}return true}function isEmail(c){var b=c;if(b.length<=0){return false}var a=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(a.test(b)){return true}else{return false}}function checkTelIsExist(b,c){var a=$.trim($("#"+b).val());if(a==""){return false}if(!isMobile(a)){if($("#"+c)){$("#"+c).html("输入格式不正确")}else{alert("输入格式不正确")}return false}else{$("#"+c).html("");return true}}function downFile(a){window.location.href="/filedownload/commonDownLoad.html?&filePath="+a}function getContractPath(c,a){var b;if(a=="STHT"){b="selftripTravelContract.pdf";window.location.href="/filedownload/commonDownLoad.html?&filePath="+c+b}else{if(a=="SI"){b="/b2cupload/file/contractdomesticSafeInstruction.doc";window.location.href="/filedownload/commonDownLoad.html?&filePath="+b}else{$.ajax({url:"/siteManage/getContractPath.html",type:"post",data:{channel:a},error:function(){},success:function(d){if(d!=""){window.location.href="/filedownload/commonDownLoad.html?&filePath="+d}}})}}}function fdownLoad(a){var b="/filedownload/commonDownLoad.html?&filePath="+a;window.location.href=b}function isLettersAndNumbers(b){if($.trim(b)==""){return true}var a=/^.[A-Za-z0-9]+$/;if(a.test($.trim(b))){return true}else{return false}}var __entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};String.prototype.escapeHTML=function(){return String(this).replace(/[&<>"'\/]/g,function(a){return __entityMap[a]})};window.easemobim=window.easemobim||{};function recordClickInfo(a){$.post("/customerService/recordClickCustomerServiceInfo.html",{index:a},"JSON")}function customerServiceClick(b){var a=getExtMsg();window.localStorage.setItem("cc_extMsg",JSON.stringify(a));recordClickInfo(b);var c=getDetailChannel();if(c){openOnlineCC(c)}else{location.href="/kefu.html"}}function ccInit(a){$.ajax({url:"/customerService/checkLoginAndGetInfo.html",type:"POST",async:false,dataType:"JSON",success:function(e){e=JSON.parse(e);var c=null;if(e.customerServiceFlag==""){regist(e.login_id,e.true_name)}c=window.localStorage.getItem("cc_extMsg");var b=window.localStorage.getItem("cc_index");c=JSON.parse(c);if(c){c.msgtype.track.title="【频道:"+b+"】--"+c.msgtype.track.title}easemobim.config={tenantId:"33694",domain:"//kefu.easemob.com",path:"//"+a+"/webim_PC",staticPath:"//"+a+"/webim_PC/static",user:{username:e.login_id||"",password:e.login_id||"",token:""},visitor:{trueName:e.true_name||"",userNickname:e.true_name||"",phone:e.mobile||"",companyName:e.companyids||"",email:e.email||""},hide:true,autoConnect:true,resources:true,ticket:false,extMsg:c};easemobim.bind({tenantId:e.tenantId||"33694",emgroup:e.emgroup||"北京",appKey:e.appKey||"1141161226178942#service",to:e.IMID||"service",xmppServer:"im-api.easemob.com",restServer:"a1.easemob.com"});var d=e.tenantId+(e.emgroup||"北京");window.localStorage.setItem("cc_url",easemobim.tenants[d].url)}})}function openOnlineCC(a){window.localStorage.setItem("cc_index",a);window.open("/faq/onlineIm.html","","height=512, width=700, top=200, left=200, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no")}function getDetailChannel(){var a="";var b=document.URL;if(/.*\/outboundgroup/.test(b)||/.*\/outboundfree/.test(b)){a="出境游"}else{if(/.*\/domesticgroup/.test(b)||/.*\/domesticfree/.test(b)){a="国内游"}else{if(/.*\/shopping/.test(b)){a="旅行用品"}else{if(/.*\/ticket/.test(b)){a="景点门票"}else{if(/.*\/visa/.test(b)){a="签证/签注"}else{if(/.*\/hotel\/detail/.test(b)||/.*\/ihotel\/detail/.test(b)){a="酒店"}}}}}}return a}function getExtMsg(){var d=document.URL;var f=document.title;var e="";var b="";if(/.*\/outboundgroup/.test(d)||/.*\/outboundfree/.test(d)||/.*\/domesticgroup/.test(d)||/.*\/domesticfree/.test(d)){var f=$("#route_name").val();b=$("#priceShow_span").find("b").text();if(d.indexOf("group")>0){e=$("#detailPicP").eq(0).attr("data-original")}else{if(d.indexOf("free")>0){e=$("#pc_pic_url").eq(0).attr("data-original")}}}var c=$("#bookingURL").val();d=c||d;var a={type:"custom",msgtype:{track:{title:f,price:b?"¥:"+b:"",img_url:e||"",item_url:d||""}}};return a}function regist(c,d){var b=new WebIM.connection({https:WebIM.config.https,url:WebIM.config.xmppURL,isAutoLogin:WebIM.config.isAutoLogin,isMultiLoginSessions:WebIM.config.isMultiLoginSessions,heartBeatWait:WebIM.config.heartBeatWait,autoReconnectNumMax:WebIM.config.autoReconnectNumMax,autoReconnectInterval:WebIM.config.autoReconnectInterval});var a={username:c,password:c,nickname:d,appKey:WebIM.config.appkey,apiUrl:WebIM.config.apiURL,success:function(){$.ajax({url:"/customerService/getCustomerServiceUserInfo.html",type:"POST"})},error:function(){}};b.registerUser(a);b.close()};