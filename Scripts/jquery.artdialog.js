/*!
 * artDialog 4.1.6
 * Date: 2012-07-16 22:57
 * http://code.google.com/p/artdialog/
 * (c) 2009-2012 TangBin, http://www.planeArt.cn
 *
 * This is licensed under the GNU LGPL, version 2.1 or later.
 * For details, see: http://creativecommons.org/licenses/LGPL/2.1/
 */
(function(n,A,i){n.noop=n.noop||function(){};var d,c,H,F,B=0,b=n(A),k=n(document),f=n("html");H=document.documentElement;var a=A.VBArray&&!A.XMLHttpRequest,G="createTouch" in document&&!("onmousemove" in H)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),E="artDialog"+ +new Date,u=function(g,e,m){g=g||{};if("string"===typeof g||1===g.nodeType){g={content:g,fixed:!G}}var l;l=u.defaults;var j=g.follow=1===this.nodeType&&this||g.follow,h;for(h in l){g[h]===i&&(g[h]=l[h])}n.each({ok:"yesFn",cancel:"noFn",close:"closeFn",init:"initFn",okVal:"yesText",cancelVal:"noText"},function(o,p){g[o]=g[o]!==i?g[o]:g[p]});"string"===typeof j&&(j=n(j)[0]);g.id=j&&j[E+"follow"]||g.id||E+B;l=u.list[g.id];if(j&&l){return l.follow(j).zIndex().focus()}if(l){return l.zIndex().focus()}if(G){g.fixed=!1}if(!n.isArray(g.button)){g.button=g.button?[g.button]:[]}if(e!==i){g.ok=e}if(m!==i){g.cancel=m}g.ok&&g.button.push({name:g.okVal,callback:g.ok,focus:!0});g.cancel&&g.button.push({name:g.cancelVal,callback:g.cancel});u.defaults.zIndex=g.zIndex;B++;return u.list[g.id]=d?d._init(g):new u.fn._init(g)};u.fn=u.prototype={version:"4.1.6",closed:!0,_init:function(g){var e,j=g.icon,h=j&&(a?{png:"icons/"+j+".png"}:{backgroundImage:"url('"+g.path+"/skins/icons/"+j+".png')"});this.closed=!1;this.config=g;this.DOM=e=this.DOM||this._getDOM();e.wrap.addClass(g.skin);e.close[!1===g.cancel?"hide":"show"]();e.icon[0].style.display=j?"":"none";e.iconBg.css(h||{background:"none"});e.se.css("cursor",g.resize?"se-resize":"auto");e.title.css("cursor",g.drag?"move":"auto");e.content.css("padding",g.padding);this[g.show?"show":"hide"](!0);this.button(g.button).title(g.title).content(g.content,!0).size(g.width,g.height).time(g.time);g.follow?this.follow(g.follow):this.position(g.left,g.top);this.zIndex().focus();g.lock&&this.lock();this._addEvent();this._ie6PngFix();d=null;g.init&&g.init.call(this,A);return this},content:function(K,J){var I,z,x,t,q=this,L=q.DOM,o=L.wrap[0],w=o.offsetWidth,s=o.offsetHeight,v=parseInt(o.style.left),y=parseInt(o.style.top),l=o.style.width,L=L.content,p=L[0];q._elemBack&&q._elemBack();o.style.width="auto";if(K===i){return p}if("string"===typeof K){L.html(K)}else{if(K&&1===K.nodeType){t=K.style.display,I=K.previousSibling,z=K.nextSibling,x=K.parentNode,q._elemBack=function(){I&&I.parentNode?I.parentNode.insertBefore(K,I.nextSibling):z&&z.parentNode?z.parentNode.insertBefore(K,z):x&&x.appendChild(K);K.style.display=t;q._elemBack=null},L.html(""),p.appendChild(K),K.style.display="block"}}if(!J){q.config.follow?q.follow(q.config.follow):(w=o.offsetWidth-w,s=o.offsetHeight-s,y-=s/2,o.style.left=Math.max(v-w/2,0)+"px",o.style.top=Math.max(y,0)+"px");if(l&&"auto"!==l){o.style.width=o.offsetWidth+"px"}q._autoPositionType()}q._ie6SelectFix();q._runScript(p);return q},title:function(g){var e=this.DOM,h=e.wrap,e=e.title;if(g===i){return e[0]}!1===g?(e.hide().html(""),h.addClass("aui_state_noTitle")):(e.show().html(g||""),h.removeClass("aui_state_noTitle"));return this},position:function(w,v){var t=this.config,s=this.DOM.wrap[0],q=a?!1:t.fixed,t=a&&this.config.fixed,m=k.scrollLeft(),l=k.scrollTop(),x=q?0:m,q=q?0:l,j=b.width(),p=b.height(),o=s.offsetWidth,r=s.offsetHeight,s=s.style;if(w||0===w){if(this._left=-1!==w.toString().indexOf("%")?w:null,w=this._toNumber(w,j-o),"number"===typeof w){w=t?w+=m:w+x,s.left=Math.max(w,x)+"px"}else{if("string"===typeof w){s.left=w}}}if(v||0===v){if(this._top=-1!==v.toString().indexOf("%")?v:null,v=this._toNumber(v,p-r),"number"===typeof v){v=t?v+=l:v+q,s.top=Math.max(v,q)+"px"}else{if("string"===typeof v){s.top=v}}}if(w!==i&&v!==i){this._follow=null,this._autoPositionType()}return this},size:function(g,e){var o,m,l=this.DOM;m=l.wrap;var j=l.main,h=m[0].style,l=j[0].style;if(g){if(this._width=-1!==g.toString().indexOf("%")?g:null,o=b.width()-m[0].offsetWidth+j[0].offsetWidth,g=o=this._toNumber(g,o),"number"===typeof g){h.width="auto",l.width=Math.max(this.config.minWidth,g)+"px",h.width=m[0].offsetWidth+"px"}else{if("string"===typeof g){l.width=g,"auto"===g&&m.css("width","auto")}}}if(e){if(this._height=-1!==e.toString().indexOf("%")?e:null,m=b.height()-m[0].offsetHeight+j[0].offsetHeight,e=m=this._toNumber(e,m),"number"===typeof e){l.height=Math.max(this.config.minHeight,e)+"px"}else{if("string"===typeof e){l.height=e}}}this._ie6SelectFix();return this},follow:function(M){var L,K=this.config;if("string"===typeof M||M&&1===M.nodeType){L=n(M),M=L[0]}if(!M||!M.offsetWidth&&!M.offsetHeight){return this.position(this._left,this._top)}var J=E+"follow",z=b.width(),x=b.height(),w=k.scrollLeft(),y=k.scrollTop(),q=L.offset();L=M.offsetWidth;var I=a?!1:K.fixed,r=I?q.left-w:q.left,q=I?q.top-y:q.top,v=this.DOM.wrap[0],h=v.style,j=v.offsetWidth,v=v.offsetHeight,N=r-(j-L)/2,O=q+M.offsetHeight,w=I?0:w,y=I?0:y;h.left=(N<w?r:N+j>z&&r-j>w?r-j+L:N)+"px";h.top=(O+v>x+y&&q-v>y?q-v:O)+"px";this._follow&&this._follow.removeAttribute(J);this._follow=M;M[J]=K.id;this._autoPositionType();return this},button:function(){var g=this,e=arguments,m=g.DOM.buttons,l=m[0],j=g._listeners=g._listeners||{},h=n.isArray(e[0])?e[0]:[].slice.call(e);if(e[0]===i){return l}n.each(h,function(o,s){var q=s.name,r=!j[q],p=!r?j[q].elem:document.createElement("button");j[q]||(j[q]={});if(s.callback){j[q].callback=s.callback}if(s.className){p.className=s.className}if(s.focus){g._focus&&g._focus.removeClass("aui_state_highlight"),g._focus=n(p).addClass("aui_state_highlight"),g.focus()}p.setAttribute("type","button");p[E+"callback"]=q;p.disabled=!!s.disabled;if(r){p.innerHTML=q,j[q].elem=p,l.appendChild(p)}});m[0].style.display=h.length?"":"none";g._ie6SelectFix();return g},show:function(e){this.DOM.wrap.show();!e&&this._lockMaskWrap&&this._lockMaskWrap.show();return this},hide:function(e){this.DOM.wrap.hide();!e&&this._lockMaskWrap&&this._lockMaskWrap.hide();return this},close:function(){if(this.closed){return this}var g=this.DOM,e=g.wrap,m=u.list,l=this.config.close,j=this.config.follow;this.time();if("function"===typeof l&&!1===l.call(this,A)){return this}this.unlock();this._elemBack&&this._elemBack();e[0].className=e[0].style.cssText="";g.title.html("");g.content.html("");g.buttons.html("");if(u.focus===this){u.focus=null}j&&j.removeAttribute(E+"follow");delete m[this.config.id];this._removeEvent();this.hide(!0)._setAbsolute();for(var h in this){this.hasOwnProperty(h)&&"DOM"!==h&&delete this[h]}d?e.remove():d=this;return this},time:function(g){var e=this,j=e.config.cancelVal,h=e._timer;h&&clearTimeout(h);if(g){e._timer=setTimeout(function(){e._click(j)},1000*g)}return e},focus:function(){try{var g=this._focus&&this._focus[0]||this.DOM.close[0];g&&g.focus()}catch(e){}return this},zIndex:function(){var g=this.DOM.wrap,e=u.focus,h=u.defaults.zIndex++;g.css("zIndex",h);this._lockMask&&this._lockMask.css("zIndex",h-1);e&&e.DOM.wrap.removeClass("aui_state_focus");u.focus=this;g.addClass("aui_state_focus");return this},lock:function(){if(this._lock){return this}var h=this,g=u.defaults.zIndex-1,q=h.DOM.wrap,p=h.config,m=k.width(),l=k.height(),j=h._lockMaskWrap||n(document.body.appendChild(document.createElement("div"))),o=h._lockMask||n(j[0].appendChild(document.createElement("div"))),m=G?"width:"+m+"px;height:"+l+"px":"width:100%;height:100%",l=a?"position:absolute;left:expression((document).documentElement.scrollLeft);top:expression((document).documentElement.scrollTop);width:expression((document).documentElement.clientWidth);height:expression((document).documentElement.clientHeight)":"";h.zIndex();q.addClass("aui_state_lock");j[0].style.cssText=m+";position:fixed;z-index:"+g+";top:0;left:0;overflow:hidden;"+l;o[0].style.cssText="height:100%;background:"+p.background+";filter:alpha(opacity=0);opacity:0";a&&o.html('<iframe src="about:blank" style="width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;filter:alpha(opacity=0)"></iframe>');o.stop();o.bind("click",function(){h._reset()}).bind("dblclick",function(){h._click(h.config.cancelVal)});0===p.duration?o.css({opacity:p.opacity}):o.animate({opacity:p.opacity},p.duration);h._lockMaskWrap=j;h._lockMask=o;h._lock=!0;return h},unlock:function(){var g=this._lockMaskWrap,e=this._lockMask;if(!this._lock){return this}var j=g[0].style,h=function(){a&&(j.removeExpression("width"),j.removeExpression("height"),j.removeExpression("left"),j.removeExpression("top"));j.cssText="display:none";d&&g.remove()};e.stop().unbind();this.DOM.wrap.removeClass("aui_state_lock");this.config.duration?e.animate({opacity:0},this.config.duration,h):h();this._lock=!1;return this},_getDOM:function(){var g=document.createElement("div"),e=document.body;g.style.cssText="position:absolute;left:0;top:0";g.innerHTML=u._templates;e.insertBefore(g,e.firstChild);for(var e=0,l={wrap:n(g)},j=g.getElementsByTagName("*"),h=j.length;e<h;e++){(g=j[e].className.split("aui_")[1])&&(l[g]=n(j[e]))}return l},_toNumber:function(g,e){if(!g&&0!==g||"number"===typeof g){return g}var h=g.length-1;g.lastIndexOf("px")===h?g=parseInt(g):g.lastIndexOf("%")===h&&(g=parseInt(e*g.split("%")[0]/100));return g},_ie6PngFix:a?function(){for(var g=0,e,l,j=u.defaults.path+"/skins/",h=this.DOM.wrap[0].getElementsByTagName("*");g<h.length;g++){if(e=h[g],l=e.currentStyle.png){l=j+l,e=e.runtimeStyle,e.backgroundImage="none",e.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+l+"',sizingMethod='crop')"}}}:n.noop,_ie6SelectFix:a?function(){var g=this.DOM.wrap,e=g[0],m=E+"iframeMask",l=g[m],j=e.offsetWidth,h=e.offsetHeight,j=j+"px",h=h+"px";l?(l.style.width=j,l.style.height=h):(l=e.appendChild(document.createElement("iframe")),g[m]=l,l.src="about:blank",l.style.cssText="position:absolute;z-index:-1;left:0;top:0;filter:alpha(opacity=0);width:"+j+";height:"+h)}:n.noop,_runScript:function(g){for(var e,l=e=0,g=g.getElementsByTagName("script"),j=g.length,h=[];e<j;e++){if("text/dialog"===g[e].type){h[l]=g[e].innerHTML,l++}}h.length&&(h=h.join(""),e=new Function(h),e.call(this))},_autoPositionType:function(){this[this.config.fixed?"_setFixed":"_setAbsolute"]()},_setFixed:function(){a&&n(function(){"fixed"!==f.css("backgroundAttachment")&&"fixed"!==n("body").css("backgroundAttachment")&&f.css({zoom:1,backgroundImage:"url(about:blank)",backgroundAttachment:"fixed"})});return function(){var g=this.DOM.wrap,e=g[0].style;if(a){var l=parseInt(g.css("left")),g=parseInt(g.css("top")),j=k.scrollLeft(),h=k.scrollTop();this._setAbsolute();e.setExpression("left","eval((document.documentElement).scrollLeft + "+(l-j)+') + "px"');e.setExpression("top","eval((document.documentElement).scrollTop + "+(g-h)+') + "px"')}else{e.position="fixed"}}}(),_setAbsolute:function(){var e=this.DOM.wrap[0].style;a&&(e.removeExpression("left"),e.removeExpression("top"));e.position="absolute"},_click:function(e){e=this._listeners[e]&&this._listeners[e].callback;return"function"!==typeof e||!1!==e.call(this,A)?this.close():this},_reset:function(h){var e=this._winSize||b.width()*b.height(),p=this._follow,o=this._width,m=this._height,j=this._left,l=this._top;if(h&&(h=this._winSize=b.width()*b.height(),e===h)){return}(o||m)&&this.size(o,m);p?this.follow(p):(j||l)&&this.position(j,l)},_addEvent:function(){var g,e=this,l=e.config,j="CollectGarbage" in A,h=e.DOM;e._winResize=function(){g&&clearTimeout(g);g=setTimeout(function(){e._reset(j)},40)};b.bind("resize",e._winResize);h.wrap.bind("click",function(m){m=m.target;if(m.disabled){return !1}if(m===h.close[0]){return e._click(l.cancelVal),!1}(m=m[E+"callback"])&&e._click(m);e._ie6SelectFix()}).bind("mousedown",function(){e.zIndex()})},_removeEvent:function(){this.DOM.wrap.unbind();b.unbind("resize",this._winResize)}};u.fn._init.prototype=u.fn;n.fn.dialog=n.fn.artDialog=function(){var e=arguments;this[this.live?"live":"bind"]("click",function(){u.apply(this,e);return !1});return this};u.focus=null;u.get=function(e){return e===i?u.list:u.list[e]};u.list={};k.bind("keydown",function(g){var e=g.target.nodeName,j=/^INPUT|TEXTAREA$/,h=u.focus,g=g.keyCode;h&&h.config.esc&&!j.test(e)&&27===g&&h._click(h.config.cancelVal)});F=A._artDialog_path||function(g,e,h){for(e in g){g[e].src&&-1!==g[e].src.indexOf("artDialog")&&(h=g[e])}c=h||g[g.length-1];h=c.src.replace(/\\/g,"/");return 0>h.lastIndexOf("/")?".":h.substring(0,h.lastIndexOf("/"))}(document.getElementsByTagName("script"));if(H=c.src.split("skin=")[1]){var D=document.createElement("link");D.rel="stylesheet";D.href=F+"/skins/"+H+".css?"+u.fn.version;c.parentNode.insertBefore(D,c)}b.bind("load",function(){setTimeout(function(){B||u({left:"-9999em",time:9,fixed:!1,lock:!1,focus:!1})},150)});try{document.execCommand("BackgroundImageCache",!1,!0)}catch(C){}u._templates='<div class="aui_outer"><table class="aui_border"><tbody><tr><td class="aui_nw"></td><td class="aui_n"></td><td class="aui_ne"></td></tr><tr><td class="aui_w"></td><td class="aui_c"><div class="aui_inner"><table class="aui_dialog"><tbody><tr><td colspan="2" class="aui_header"><div class="aui_titleBar"><div class="aui_title"></div><a class="aui_close" href="javascript:/*artDialog*/;">\u00d7</a></div></td></tr><tr><td class="aui_icon"><div class="aui_iconBg"></div></td><td class="aui_main"><div class="aui_content"></div></td></tr><tr><td colspan="2" class="aui_footer"><div class="aui_buttons"></div></td></tr></tbody></table></div></td><td class="aui_e"></td></tr><tr><td class="aui_sw"></td><td class="aui_s"></td><td class="aui_se"></td></tr></tbody></table></div>';u.defaults={content:'<div class="aui_loading"><span>loading..</span></div>',title:"\u6d88\u606f",button:null,ok:null,cancel:null,init:null,close:null,okVal:"\u786e\u5b9a",cancelVal:"\u53d6\u6d88",width:"auto",height:"auto",minWidth:96,minHeight:32,padding:"20px 25px",skin:"",icon:null,time:null,esc:!0,focus:!0,show:!0,follow:null,path:F,lock:!1,background:"#000",opacity:0.7,duration:300,fixed:!1,left:"50%",top:"38.2%",zIndex:1987,resize:!0,drag:!0};A.artDialog=n.dialog=n.artDialog=u})(this.art||this.jQuery&&(this.art=jQuery),this);(function(f){var g,d,c=f(window),b=f(document),k=document.documentElement,j=!("minWidth" in k.style),i="onlosecapture" in k,a="setCapture" in k;artDialog.dragEvent=function(){var h=this,l=function(n){var m=h[n];h[n]=function(){return m.apply(h,arguments)}};l("start");l("move");l("end")};artDialog.dragEvent.prototype={onstart:f.noop,start:function(h){b.bind("mousemove",this.move).bind("mouseup",this.end);this._sClientX=h.clientX;this._sClientY=h.clientY;this.onstart(h.clientX,h.clientY);return !1},onmove:f.noop,move:function(h){this._mClientX=h.clientX;this._mClientY=h.clientY;this.onmove(h.clientX-this._sClientX,h.clientY-this._sClientY);return !1},onend:f.noop,end:function(h){b.unbind("mousemove",this.move).unbind("mouseup",this.end);this.onend(h.clientX,h.clientY);return !1}};d=function(o){var e,n,B,C,p,A,w=artDialog.focus,z=w.DOM,v=z.wrap,u=z.title,r=z.main,q="getSelection" in window?function(){window.getSelection().removeAllRanges()}:function(){try{document.selection.empty()}catch(h){}};g.onstart=function(){A?(n=r[0].offsetWidth,B=r[0].offsetHeight):(C=v[0].offsetLeft,p=v[0].offsetTop);b.bind("dblclick",g.end);!j&&i?u.bind("losecapture",g.end):c.bind("blur",g.end);a&&u[0].setCapture();v.addClass("aui_state_drag");w.focus()};g.onmove=function(l,y){if(A){var t=v[0].style,s=r[0].style,m=l+n,x=y+B;t.width="auto";s.width=Math.max(0,m)+"px";t.width=v[0].offsetWidth+"px";s.height=Math.max(0,x)+"px"}else{s=v[0].style,t=Math.max(e.minX,Math.min(e.maxX,l+C)),m=Math.max(e.minY,Math.min(e.maxY,y+p)),s.left=t+"px",s.top=m+"px"}q();w._ie6SelectFix()};g.onend=function(){b.unbind("dblclick",g.end);!j&&i?u.unbind("losecapture",g.end):c.unbind("blur",g.end);a&&u[0].releaseCapture();j&&!w.closed&&w._autoPositionType();v.removeClass("aui_state_drag")};A=o.target===z.se[0]?!0:!1;e=function(){var l=w.DOM.wrap[0],h="fixed"===l.style.position,x=l.offsetWidth,l=l.offsetHeight,t=c.width(),m=c.height(),s=h?0:b.scrollLeft(),h=h?0:b.scrollTop();return{minX:s,minY:h,maxX:t-x+s,maxY:m-l+h}}();g.start(o)};b.bind("mousedown",function(l){var e=artDialog.focus;if(e){var q=l.target,n=e.config,e=e.DOM;if(!1!==n.drag&&q===e.title[0]||!1!==n.resize&&q===e.se[0]){return g=g||new artDialog.dragEvent,d(l),!1}}})})(this.art||this.jQuery&&(this.art=jQuery));